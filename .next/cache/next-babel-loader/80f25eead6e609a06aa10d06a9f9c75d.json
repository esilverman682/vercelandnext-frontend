{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useContext, useState, useEffect } from \"react\";\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport AuthContext from \"../context/AuthContext\";\nimport { API_URL } from '../utils/urls';\n\nconst useOrders = (user, getToken) => {\n  const {\n    0: orders,\n    1: setOrders\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  useEffect(() => {\n    const fetchOrders = async () => {\n      setLoading(true);\n\n      if (user) {\n        try {\n          const token = await getToken();\n          const orderRes = await fetch(`${API_URL}/orders`, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          const data = await orderRes.json();\n          setOrders(data);\n        } catch (err) {\n          setOrders([]);\n        }\n      }\n\n      setLoading(false);\n    };\n\n    fetchOrders();\n  }, [user]);\n  return {\n    orders,\n    loading\n  };\n};\n\nexport default (() => {\n  const {\n    user,\n    logoutUser,\n    getToken\n  } = useContext(AuthContext);\n  const {\n    orders,\n    loading\n  } = useOrders(user, getToken);\n\n  if (!user) {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(\"p\", {\n        children: \"Please Login or Register before accessing this page\"\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/\",\n        children: /*#__PURE__*/_jsx(\"a\", {\n          children: \"Go Back\"\n        })\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"Your Account\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"description\",\n        content: \"Your orders will be shown here\"\n      })]\n    }), /*#__PURE__*/_jsx(\"h2\", {\n      children: \"Account Page\"\n    }), /*#__PURE__*/_jsx(\"h3\", {\n      children: \"Your Orders\"\n    }), loading && /*#__PURE__*/_jsx(\"p\", {\n      children: \"Orders are Loading\"\n    }), orders.map(order => /*#__PURE__*/_jsxs(\"div\", {\n      children: [new Date(order.created_at).toLocaleDateString('en-EN'), \" \", order.product.name, \" $\", order.total, \" \", order.status]\n    }, order.id)), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsxs(\"p\", {\n      children: [\"Logged in as \", user.email]\n    }), /*#__PURE__*/_jsx(\"p\", {\n      children: /*#__PURE__*/_jsx(\"a\", {\n        href: \"#\",\n        onClick: logoutUser,\n        children: \"Logout\"\n      })\n    })]\n  });\n});","map":null,"metadata":{},"sourceType":"module"}